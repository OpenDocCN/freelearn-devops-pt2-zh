- en: Preface
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 前言
- en: Welcome to *Mastering Ansible*, your fully updated guide to the most valuable
    advanced features and functionalities provided by Ansible—the automation and orchestration
    tool. This book will provide you with the knowledge and skills required to truly
    understand how Ansible functions at a fundamental level, including all the latest
    features and changes since the release of version 3.0\. In turn, this will allow
    you to master the advanced capabilities needed to tackle the complex automation
    challenges of today and the future. You will gain knowledge of Ansible workflows,
    explore use cases for advanced features, troubleshoot unexpected behavior, extend
    Ansible through customization, and learn about many of the new and important developments
    in Ansible, especially around infrastructure and network provisioning.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 欢迎阅读《精通Ansible》，这是您全面更新的指南，介绍了Ansible提供的最有价值的高级功能和功能——自动化和编排工具。本书将为您提供所需的知识和技能，真正理解Ansible在基本水平上的功能，包括自3.0版本发布以来的所有最新功能和变化。这将使您能够掌握处理当今和未来复杂自动化挑战所需的高级功能。您将了解Ansible工作流程，探索高级功能的用例，解决意外行为，通过定制扩展Ansible，并了解Ansible的许多新的重要发展，特别是基础设施和网络供应方面。
- en: Who this book is for
  id: totrans-2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书适合对象
- en: This book is for Ansible developers and operators who have an understanding
    of the core elements and applications but are now looking to enhance their skills
    in applying automation using Ansible.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 本书适用于对Ansible核心元素和应用有一定了解，但现在希望通过使用Ansible来应用自动化来提高他们的技能的Ansible开发人员和运维人员。
- en: What this book covers
  id: totrans-4
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 本书涵盖的内容
- en: '[*Chapter 1*](B17462_01_Final_JC_ePub.xhtml#_idTextAnchor015), *The* *System
    Architecture and Design of Ansible*, looks at the ins and outs of how Ansible
    goes about performing tasks on behalf of an engineer, how it is designed, and
    how to work with inventory and variables.'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第1章*]，《Ansible的系统架构和设计》，介绍了Ansible在工程师代表执行任务时的内部细节，它是如何设计的，以及如何使用清单和变量。'
- en: '[*Chapter 2*](B17462_02_Final_JC_ePub.xhtml#_idTextAnchor047), *Migrating from
    Earlier Ansible Versions*, explains the architectural changes you will experience
    when you migrate from Ansible 2.x to any version from 3.x onward, how to work
    with Ansible collections, and also how to build your own—essential reading for
    anyone familiar with earlier Ansible versions.'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第2章*]，《从早期的Ansible版本迁移》，解释了从Ansible 2.x迁移到3.x及更高版本时将经历的架构变化，如何使用Ansible集合，以及如何构建自己的集合——对于熟悉早期Ansible版本的任何人来说，这是必读的。'
- en: '[*Chapter 3*](B17462_03_Final_JC_ePub.xhtml#_idTextAnchor061), *Protecting
    Your Secrets with Ansible*, explores the tools available to encrypt data at rest
    and prevent secrets from being revealed at runtime.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第3章*]，《使用Ansible保护您的秘密》，探讨了加密数据和防止秘密在运行时被揭示的工具。'
- en: '[*Chapter 4*](B17462_04_Final_JC_ePub.xhtml#_idTextAnchor078), *Ansible and
    Windows – Not Just for Linux*, explores the integration of Ansible with Windows
    hosts to enable automation in cross-platform environments.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第4章*]，《Ansible和Windows-不仅仅适用于Linux》，探讨了将Ansible与Windows主机集成，以在跨平台环境中实现自动化的方法。'
- en: '[*Chapter 5*](B17462_05_Final_JC_ePub.xhtml#_idTextAnchor099), *Infrastructure
    Management for Enterprises with AWX*, provides an overview of the powerful, open
    source graphical management framework for Ansible known as AWX, and how this might
    be employed in an enterprise environment.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第5章*]，《使用AWX进行企业基础设施管理》，概述了强大的、开源的图形化管理框架AWX，以及在企业环境中如何使用它。'
- en: '[*Chapter 6*](B17462_06_Final_JC_ePub.xhtml#_idTextAnchor123), *Unlocking the
    Power of Jinja2 Templates*, states the varied uses of the Jinja2 templating engine
    within Ansible and discusses ways to make the most of its capabilities.'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第6章*]，《解锁Jinja2模板的强大功能》，阐述了Jinja2模板引擎在Ansible中的各种用途，并讨论了如何充分利用其功能。'
- en: '[*Chapter 7*](B17462_07_Final_JC_ePub.xhtml#_idTextAnchor141), *Controlling
    Task Conditions*, explains how to change the default behavior of Ansible to customize
    task error and change conditions.'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第7章*]，《控制任务条件》，解释了如何更改Ansible的默认行为，定制任务错误和更改条件。'
- en: '[*Chapter 8*](B17462_08_Final_JC_ePub.xhtml#_idTextAnchor156), *Composing Reusable
    Ansible Content with Roles*, explains how to move beyond executing loosely organized
    tasks on hosts, and instead build clean, reusable, and self-contained code structures
    known as roles to achieve the same end result.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第8章*]，《使用角色组合可重用的Ansible内容》，解释了如何超越在主机上执行松散组织的任务，而是构建干净、可重用和自包含的代码结构，称为角色，以实现相同的最终结果。'
- en: '[*Chapter 9*](B17462_09_Final_JC_ePub.xhtml#_idTextAnchor171), *Troubleshooting
    Ansible*, takes you through the various methods that can be employed to examine,
    introspect, modify, and debug the operations of Ansible.'
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第9章*]，《故障排除Ansible》，带您了解可以用于检查、内省、修改和调试Ansible操作的各种方法。'
- en: '[*Chapter 10*](B17462_10_Final_JC_ePub.xhtml#_idTextAnchor183), *Extending
    Ansible*, covers the various ways in which new capabilities can be added to Ansible
    via modules, plugins, and inventory sources.'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第10章*]，《扩展Ansible》，介绍了通过模块、插件和清单来源添加新功能的各种方法。'
- en: '[*Chapter 11*](B17462_11_Final_JC_ePub.xhtml#_idTextAnchor210), *Minimizing
    Downtime with Rolling Deployments*, explains the common deployment and upgrade
    strategies to showcase the relevant Ansible features.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第11章*]，《通过滚动部署减少停机时间》，解释了常见的部署和升级策略，以展示相关的Ansible功能。'
- en: '[*Chapter 12*](B17462_12_Final_JC_ePub.xhtml#_idTextAnchor224), *Infrastructure
    Provisioning*, examines cloud infrastructure providers and container systems for
    creating an infrastructure to manage.'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第12章*]，《基础设施供应》，研究了用于创建管理基础设施的云基础设施提供商和容器系统。'
- en: '[*Chapter 13*](B17462_13_Final_JC_ePub.xhtml#_idTextAnchor237), *Network Automation*,
    describes the advancements in the automation of network device configuration using
    Ansible.'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '[*第13章*](B17462_13_Final_JC_ePub.xhtml#_idTextAnchor237)，*网络自动化*，描述了使用Ansible自动化网络设备配置的进展。'
- en: To get the most out of this book
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为了充分利用本书
- en: To follow the examples provided in this book, you will need access to a computer
    platform capable of running Ansible. Currently, Ansible can be run on any machine
    with Python 2.7 or Python 3 (versions 3.5 and higher) installed (Windows is supported
    for the control machine, but only through a Linux distribution running in the
    **Windows Subsystem for Linux (WSL)** layer available on newer versions—see [*Chapter
    4*](B17462_04_Final_JC_ePub.xhtml#_idTextAnchor078), *Ansible and Windows – Not
    Just for Linux*, for details). Operating systems supported include (but are not
    limited to) Red Hat, Debian, Ubuntu, CentOS, macOS, and FreeBSD.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 要跟随本书提供的示例，您需要访问能够运行Ansible的计算机平台。目前，Ansible可以在安装了Python 2.7或Python 3（3.5及更高版本）的任何机器上运行（Windows支持控制机，但仅通过在较新版本上运行的Linux发行版中的**Windows子系统Linux（WSL）**层支持—有关详细信息，请参见[*第4章*](B17462_04_Final_JC_ePub.xhtml#_idTextAnchor078)，*Ansible和Windows-不仅适用于Linux*）。支持的操作系统包括（但不限于）Red
    Hat、Debian、Ubuntu、CentOS、macOS和FreeBSD。
- en: This book uses the Ansible 4.x.x series release. Ansible installation instructions
    can be found at [https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html](https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html).
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 本书使用Ansible 4.x.x系列版本。Ansible安装说明可在[https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html](https://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html)找到。
- en: Some examples use Docker version 20.10.8\. Docker installation instructions
    can be found at [https://docs.docker.com/get-docker/](https://docs.docker.com/get-docker/).
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 一些示例使用了Docker版本20.10.8。Docker安装说明可在[https://docs.docker.com/get-docker/](https://docs.docker.com/get-docker/)找到。
- en: 'A handful of examples in this book make use of accounts on both **Amazon Web
    Services (AWS)** and Microsoft Azure. More information about these services may
    be found at [https://aws.amazon.com/](https://aws.amazon.com/) and [https://azure.microsoft.com](https://azure.microsoft.com),
    respectively. We also delve into the management of OpenStack with Ansible, and
    the examples in this book were tested against a single *all-in-one* instance of
    DevStack as per the instructions found here: [https://docs.openstack.org/devstack/latest/](https://docs.openstack.org/devstack/latest/).'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中的一些示例使用了**Amazon Web Services（AWS）**和Microsoft Azure上的帐户。有关这些服务的更多信息，请访问[https://aws.amazon.com/](https://aws.amazon.com/)和[https://azure.microsoft.com](https://azure.microsoft.com)。我们还深入探讨了使用Ansible管理OpenStack，并且本书中的示例是根据此处的说明针对DevStack的单个*一体化*实例进行测试：[https://docs.openstack.org/devstack/latest/](https://docs.openstack.org/devstack/latest/)。
- en: 'Finally, [*Chapter 13*](B17462_13_Final_JC_ePub.xhtml#_idTextAnchor237)*, Network
    Automation,* makes use of Arista vEOS 4.26.2F and Cumulus VX version 4.4.0 in
    the example code—please see here for more information: [https://www.arista.com/en/support/software-download](https://www.arista.com/en/support/software-download)
    and [https://www.nvidia.com/en-gb/networking/ethernet-switching/cumulus-vx/](https://www.nvidia.com/en-gb/networking/ethernet-switching/cumulus-vx/).
    If you are using the digital version of this book, we advise you to type the code
    yourself or access the code from the book''s GitHub repository (a link is available
    in the next section). Doing so will help you avoid any potential errors related
    to the copying and pasting of code.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，[*第13章*](B17462_13_Final_JC_ePub.xhtml#_idTextAnchor237)*，网络自动化*，在示例代码中使用了Arista
    vEOS 4.26.2F和Cumulus VX版本4.4.0—请参见此处获取更多信息：[https://www.arista.com/en/support/software-download](https://www.arista.com/en/support/software-download)和[https://www.nvidia.com/en-gb/networking/ethernet-switching/cumulus-vx/](https://www.nvidia.com/en-gb/networking/ethernet-switching/cumulus-vx/)。如果您使用本书的数字版本，我们建议您自己输入代码或从书的GitHub存储库中访问代码（下一节中提供了链接）。这样做将帮助您避免与复制和粘贴代码相关的任何潜在错误。
- en: Download the example code files
  id: totrans-24
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载示例代码文件
- en: You can download the example code files for this book from GitHub at [https://github.com/PacktPublishing/Mastering-Ansible-Fourth-Edition](https://github.com/PacktPublishing/Mastering-Ansible-Fourth-Edition).
    If there's an update to the code, it will be updated in the GitHub repository.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以从GitHub上下载本书的示例代码文件，网址为[https://github.com/PacktPublishing/Mastering-Ansible-Fourth-Edition](https://github.com/PacktPublishing/Mastering-Ansible-Fourth-Edition)。如果代码有更新，将在GitHub存储库中进行更新。
- en: We also have other code bundles from our rich catalog of books and videos available
    at [https://github.com/PacktPublishing/](https://github.com/PacktPublishing/).
    Check them out!
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还提供了来自我们丰富书籍和视频目录的其他代码包，可在[https://github.com/PacktPublishing/](https://github.com/PacktPublishing/)上找到。请查看！
- en: Code in Action
  id: totrans-27
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 实际代码演示
- en: The Code in Action videos for this book can be viewed at [https://bit.ly/3vvkzbP](https://bit.ly/3vvkzbP).
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 本书的实际代码演示视频可在[https://bit.ly/3vvkzbP](https://bit.ly/3vvkzbP)观看。
- en: Download the color images
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 下载彩色图片
- en: 'We also provide a PDF file that has color images of the screenshots and diagrams
    used in this book. You can download it here: [https://static.packt-cdn.com/downloads/9781801818780_ColorImages.pdf](_ColorImages.pdf).'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还提供了一个PDF文件，其中包含本书中使用的屏幕截图和图表的彩色图片。您可以在这里下载：[https://static.packt-cdn.com/downloads/9781801818780_ColorImages.pdf](_ColorImages.pdf)。
- en: Conventions used
  id: totrans-31
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用的约定
- en: There are a number of text conventions used throughout this book.
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 本书中使用了许多文本约定。
- en: '`Code in text`: Indicates code words in the text, database table names, folder
    names, filenames, file extensions, pathnames, dummy URLs, user input, and Twitter
    handles. Here is an example: "This book will assume that there are no settings
    in the `ansible.cfg` file that would affect the default operation of Ansible"'
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: '`文本中的代码`：表示文本中的代码字词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟URL、用户输入和Twitter句柄。例如：“本书将假定`ansible.cfg`文件中没有设置会影响Ansible默认操作的设置”'
- en: 'A block of code is set as follows:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 代码块设置如下：
- en: '[PRE0]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Any command-line input or output is written as follows:'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 任何命令行输入或输出都将按照以下格式编写：
- en: '[PRE1]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '**Bold**: Indicates a new term, an important word, or words that you see on
    screen. For instance, words in menus or dialog boxes appear in **bold**. Here
    is an example: "You simply need to navigate to your profile preferences page and
    click the **Show API Key** button."'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: '**粗体**：表示一个新术语，一个重要的词，或者屏幕上看到的词。例如，菜单或对话框中的词以**粗体**显示。这是一个例子：“您只需导航到您的个人资料首选项页面，然后单击**显示API密钥**按钮。”'
- en: Tips or important notes
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 提示或重要说明
- en: Appear like this.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 以这种方式出现。
