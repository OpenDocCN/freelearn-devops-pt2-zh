["```\n**$ openstack server migrate <instance>**\n**$ openstack server migrate testinst**\n\n```", "```\n**$ openstack server migrate --live=<new compute node> <instance>**\n**$ openstack server migrate --live=compute01 testinst**\n\n```", "```\n**$ source openrc** \n**$ openstack server migrate <instance>**\n\n```", "```\n**$ openstack --os-cloud=<cloud name> server migrate <instance>**\n\n```", "```\n**$ source openrc**\n**$ openstack server list**\n**$ openstack server migrate test-1ae02fae-93ca-4485-a797-e7f781a7a25b**\n**$ nova migration-list**\n\n```", "```\n**$ openstack server resize \n  --confirm test-1ae02fae-93ca-4485-a797-e7f781a7a25b**\n\n```", "```\n--- \n\n- name: Retrieve hypervisor list \n shell: openstack --os-cloud=\"{{ CLOUD_NAME }}\" \n     hypervisor list | awk 'NR > 3' | awk '$4 != \"{{ desthype }}\" \n     { print $4 }' \n register: hypelist \n\n```", "```\n**awk 'NR > 3' | awk '$4 != \"{{ desthype }}\" { print $4 }'**\n\n```", "```\n- name: Collect pre-migration instance details \n shell: openstack --os-cloud=\"{{ CLOUD_NAME }}\"  \n     server list --name \"{{ instance }}\" --long | awk 'NR > 3' | awk '{ print $16 }' \n register: preinststat \n\n```", "```\n**openstack server list --name {{ instance }} --long**\n\n```", "```\n- name: Disable unselected hypervisors \n command: nova \"{{ AUTH_S }}\"  \n      service-disable \"{{ item }}\" nova-compute --reason '{{ migreason }}' \n with_items: \"{{hypelist.stdout_lines}}\" \n\n```", "```\n- name: Migrate instance \n command: openstack --os-cloud=\"{{ CLOUD_NAME }}\"  \n      server migrate \"{{ instance }}\" \n\n```", "```\n- name: Enable the disabled hypervisors \n command: nova \"{{ AUTH_S }}\" \n      service-enable \"{{ item }}\" nova-compute \n with_items: \"{{hypelist.stdout_lines}}\" \n\n```", "```\n- name: Confirm instance migration \n command: openstack --os-cloud=\"{{ CLOUD_NAME }}\"  \n      server resize --confirm \"{{ instance }}\" \n\n```", "```\n- name: Collect post-migration instance details \n shell: openstack --os-cloud=\"{{ CLOUD_NAME }}\"  \n     server list --name \"{{ instance }}\" --long | awk 'NR > 3' | awk '{ print $16 \" and has a status of \" $10 }' | awk 'NR == 1' \n register: postinststat \n\n- name: Show instance location and status \n debug: msg=\"{{ instance }} was migrated from {{ item.0 }} to {{ item.1 }}\" \n with_together: \n  - \"{{preinststat.stdout_lines}}\" \n  - \"{{postinststat.stdout_lines}}\" \n\n```", "```\n--- \ndesthype: 021579-compute02 \ninstance: testG-2c00131c-c2c7-4eae-aa90-981e54ca7b04 \nmigreason: \"Migrating instance to new compute node\" \n\n```", "```\ndesthype   # this value would be the name of the compute node you wish \n             to migrate the instance to \n\ninstance   # the name of the instance to be migrated \n\nmigreason: # a string encapsulated in quotes to explain the reason \n             for migrating the instance (keep the string brief) \n\n```", "```\n--- \n# This playbook used to migrate instance to specific compute node.  \n\n- hosts: util_container \n remote_user: root \n become: true \n roles: \n  - instance-migrate \n\n```", "```\nhosts       # the host or host group to execute the playbook against \n\nremote_user # the user to use when executing the playbook on the remote host(s) \n\nbecome      # will tell Ansible to become the above user on the remote host(s) \n\nroles       # provide a list of roles to execute as part of this playbook \n\n```", "```\n[localhost] \nlocalhost ansible_connection=local \n\n[util_container] \n172.29.236.199 \n\n```", "```\n# Here are variables related globally to the util_container host group \n\nCLOUD_NAME: default \n\nAUTH_S: --os-username {{ OS_USERNAME }} --os-password {{ OS_PASSWORD }} --os-project-name {{ OS_TENANT_NAME }} --os-domain-name {{ OS_DOMAIN_NAME }} --os-auth-url {{ OS_AUTH_URL }} \n\nOS_USERNAME: admin \nOS_PASSWORD: passwd \nOS_TENANT_NAME: admin \nOS_DOMAIN_NAME: default \nOS_AUTH_URL: http://172.29.238.2:5000/v3 \n\n```", "```\n--- \n\n- name: Retrieve hypervisor list \n shell: openstack --os-cloud=\"{{ CLOUD_NAME }}\" \n     hypervisor list | awk 'NR > 3' | awk '$4 != \"{{ desthype }}\" { print $4 }' \n register: hypelist \n\n- name: Collect pre-migration instance details \n shell: openstack --os-cloud=\"{{ CLOUD_NAME }}\"  \n     server list --name \"{{ instance }}\" --long | awk 'NR > 3' | awk '{ print $16 }' \n register: preinststat \n\n- name: Disable unselected hypervisors \n command: nova \"{{ AUTH_S }}\"  \n      service-disable \"{{ item }}\" nova-compute --reason '{{ migreason }}' \n with_items: \"{{hypelist.stdout_lines}}\" \n\n- name: Migrate instance \n command: openstack --os-cloud=\"{{ CLOUD_NAME }}\"  \n      server migrate \"{{ instance }}\" \n\n- name: Enable the disabled hypervisors \n command: nova \"{{ AUTH_S }}\" \n      service-enable \"{{ item }}\" nova-compute \n with_items: \"{{hypelist.stdout_lines}}\" \n\n- name: Confirm instance migration \n command: openstack --os-cloud=\"{{ CLOUD_NAME }}\"  \n      server resize --confirm \"{{ instance }}\" \n\n- name: Collect post-migration instance details \n shell: openstack --os-cloud=\"{{ CLOUD_NAME }}\"  \n     server list --name \"{{ instance }}\" --long | awk 'NR > 3' | awk '{ print $16 \" and has a status of \" $10 }' | awk 'NR == 1' \n register: postinststat \n\n- name: Show instance location and status \n debug: msg=\"{{ instance }} was migrated from {{ item.0 }} to {{ item.1 }}\" \n with_together: \n  - \"{{preinststat.stdout_lines}}\" \n  - \"{{postinststat.stdout_lines}}\" \n\n```", "```\n--- \ndesthype: 021579-compute02 \ninstance: testG-2c00131c-c2c7-4eae-aa90-981e54ca7b04 \nmigreason: \"Migrating instance to new compute node\" \n\n```", "```\n--- \n# This playbook used to migrate instance to specific compute node.  \n\n- hosts: util_container \n remote_user: root \n become: true \n roles: \n  - instance-migrate \n\n```", "```\n[localhost] \nlocalhost ansible_connection=local \n\n[util_container] \n172.29.236.199 \n\n```", "```\n# Here are variables related globally to the util_container host group \n\nCLOUD_NAME: default \n\nAUTH_S: --os-username {{ OS_USERNAME }} --os-password {{ OS_PASSWORD }} --os-project-name {{ OS_TENANT_NAME }} --os-domain-name {{ OS_DOMAIN_NAME }} --os-auth-url {{ OS_AUTH_URL }} \n\nOS_USERNAME: admin \nOS_PASSWORD: passwd \nOS_TENANT_NAME: admin \nOS_DOMAIN_NAME: default \nOS_AUTH_URL: http://172.29.238.2:5000/v3 \n\n```", "```\n**$ cd os-admin-with-ansible-v2**\n**$ ansible-playbook -i hosts migrate.yml**\n\n```"]