["```\n$ sudo pip install PyVmomi\n```", "```\n- name: example fireware rule\n  vca_fw:\n   instance_id: \"abcdef123456-1234-abcd-1234-abcdef123456\"\n   vdc_name: \"my_vcd\"\n   service_type: \"vca\"\n   state: \"present\"\n   fw_rules:\n     - description: \"Allow SSH\"\n       source_ip: \"10.20.30.40\"\n       source_port: \"Any\"\n       dest_port: \"22\"\n       dest_ip: \"192.0.10.20\"\n       is_enable: \"true\"\n       enable_logging: \"false\"\n       protocol: \"Tcp\"\n       policy: \"allow\"\n```", "```\n- name: example nat rule\n  vca_nat:\n   instance_id: \"abcdef123456-1234-abcd-1234-abcdef123456\"\n   vdc_name: \"my_vcd\"\n   service_type: \"vca\"\n   state: \"present\"\n   nat_rules:\n      - rule_type: \"DNAT\"\n        original_ip: \"123.123.123.123\"\n        original_port: \"2222\"\n        translated_ip: \"192.0.10.20\"\n        translated_port: \"22\"\n```", "```\n$ ssh username@123.123.123.123 -p2222\n```", "```\n- name: example vApp\n  vca_vapp:\n    vapp_name: \"Example\"\n    vdc_name: \"my_vcd\"\n    state: \"present\"\n    operation: \"poweron\"\n    template_name: \"CentOS7 x86_64 1804\"\n```", "```\n- name: Create a cluster\n  vmware_cluster:\n    hostname: \"{{ item.ip }}\"\n    datacenter_name: \"my_datacenter\"\n    cluster_name: \"cluster\"\n    enable_ha: \"yes\"\n    enable_drs: \"yes\"\n    enable_vsan: \"yes\"\n    username: \"{{ item.username }}\"\n    password: \"{{ item.password }}\"\n  with_items: \"{{ vsphere_hosts }}\"\n```", "```\n- name: Create a datacenter\n  vmware_datacenter:\n    hostname: \"{{ item.ip }}\"\n    username: \"{{ item.username }}\"\n    password: \"{{ item.password }}\"\n    datacenter_name: \"my_datacenter\"\n    state: present\n  with_items: \"{{ vsphere_hosts }}\"\n```", "```\n- name: Gather facts on all VMs in the cluster\n  vmware_vm_facts:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    vm_type: \"vm\"\n  delegate_to: \"localhost\"\n  register: vm_facts\n```", "```\n- name: Shell example\n  vmware_vm_shell:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    datacenter: \"my_datacenter\"\n    folder: \"/my_vms\"\n    vm_id: \"example_vm\"\n    vm_username: \"root\"\n    vm_password: \"supersecretpassword\"\n    vm_shell: \"/bin/cat\"\n    vm_shell_args: \" results_file \"\n    vm_shell_env:\n      - \"PATH=/bin\"\n      - \"VAR=test\"\n    vm_shell_cwd: \"/tmp\"\n  delegate_to: \"localhost\"\n  register: shell_results\n```", "```\n$ /bin/cat results_file\n```", "```\n- name: Create DRS Affinity Rule for VM-VM\n  vmware_vm_vm_drs_rule:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    cluster_name: \"cluster\"\n    vms: \"{{ item }}\"\n    drs_rule_name: \"\"\n    enabled: \"True\"\n    mandatory: \"True\"\n    affinity_rule: \"True\"\n  with_items:\n    - \"example_vm\"\n    - \"another_example_vm\"\n```", "```\n- name: migrate vm to dvs\n  vmware_vm_vss_dvs_migrate\"\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n```", "```\n    password: \"{{ vsphere_password }}\"\n    vm_name: \"example_vm\"\n    dvportgroup_name: \"example_portgroup\"\n  delegate_to: localhost\n```", "```\n- name: copy file to datastore\n  vsphere_copy:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    src: \"/path/to/local/file\"\n    datacenter: \"my_datacenter\"\n    datastore: \"my_datastore\"\n    path: \"path/to/remove/file\"\n  transport: local\n```", "```\n- name: Create a vm folder\n  vcenter_folder:\n    hostname: \"{{ item.ip }}\"\n    username: \"{{ item.username }}\"\n    password: \"{{ item.password }}\"\n    datacenter_name: \"my_datacenter\"\n    folder_name: \"virtual_machines\"\n    folder_type: \"vm\"\n    state: \"present\"\n```", "```\n- name: Create a host folder\n  vcenter_folder:\n    hostname: \"{{ item.ip }}\"\n    username: \"{{ item.username }}\"\n    password: \"{{ item.password }}\"\n    datacenter_name: \"my_datacenter\"\n    folder_name: \"hosts\"\n    folder_type: \"host\"\n    state: \"present\"\n```", "```\n- name: Add a license\n  vcenter_license:\n    hostname: \"{{ item.ip }}\"\n    username: \"{{ item.username }}\"\n    password: \"{{ item.password }}\"\n    license: \"123abc-456def-abc456-def123\"\n    state: \"present\"\n  delegate_to: localhost\n```", "```\n- name: Create a VM from a template\n  vmware_guest:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    datacenter: \"my-datacenter\"\n    folder: \"/vms\"\n    name: \"yet_another_example_vm\"\n    state: \"poweredon\"\n    template: \"centos7-x86_64-1804\"\n    disk:\n      - size_gb: \"40\"\n        type: \"thin\"\n        datastore: \"my_datastore\"\n    hardware:\n      memory_mb: \"4048\"\n      num_cpus: \"4\"\n      max_connections: \"3\"\n      hotadd_cpu: \"True\"\n      hotremove_cpu: \"True\"\n      hotadd_memory: \"True\"\n    networks:\n      - name: \"VM Network\"\n        ip: \"192.168.1.100\"\n        netmask: \"255.255.255.0\"\n        gateway: \"192.168.1.254\"\n        dns_servers:\n          - \"192.168.1.1\"\n          - \"192.168.1.2\"\n    wait_for_ip_address: \"yes\"\n  delegate_to: \"localhost\"\n  register: deploy\n```", "```\n- name: Gather facts on the yet_another_example_vm vm\n  vmware_guest_facts:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    datacenter: \"my-datacenter\"\n    folder: \"/vms\"\n    name: \"yet_another_example_vm\"\n  delegate_to: localhost\n  register: facts\n```", "```\n- name: create a directory on a vm\n  vmware_guest_file_operation:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    datacenter: \"my-datacenter\"\n    vm_id: \"yet_another_example_vm\"\n    vm_username: \"root\"\n    vm_password: \"supersecretpassword\"\n    directory:\n      path: \"/tmp/imported/files\"\n      operation: \"create\"\n      recurse: \"yes\"\n  delegate_to: localhost\n```", "```\n- name: copy file to vm\n  vmware_guest_file_operation:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    datacenter: \"my-datacenter\"\n    vm_id: \"yet_another_example_vm\"\n    vm_username: \"root\"\n    vm_password: \"supersecretpassword\"\n    copy:\n        src: \"files/config.zip\"\n        dest: \"/tmp/imported/files/config.zip\"\n        overwrite: \"False\"\n  delegate_to: localhost\n```", "```\n- name: Find vm folder location\n  vmware_guest_find:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    name: \"yet_another_example_vm\"\n  register: vm_folder\n```", "```\n- name: Powercycle a vm\n  vmware_guest_powerstate:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    folder: \"/vms\"\n    name: \"yet_another_example_vm\"\n    state: \"reboot-guest\"\n  delegate_to: localhost\n```", "```\n- name: April fools\n  vmware_guest_powerstate:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    folder: \"/vms\"\n    name: \"yet_another_example_vm\"\n    state: \"powered-off\"\n    scheduled_at: \"01/04/2019 09:00\"\n  delegate_to: localhost\n```", "```\n- name: Create a snapshot\n  vmware_guest_snapshot:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    datacenter: \"my-datacenter\"\n    folder: \"/vms\"\n    name: \"yet_another_example_vm\"\n    snapshot_name: \"pre-patching\"\n    description: \"snapshot made before patching\"\n    state: \"present\"\n  delegate_to: localhost\n```", "```\n- name: Remove a snapshot\n  vmware_guest_snapshot:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    datacenter: \"my-datacenter\"\n    folder: \"/vms\"\n    name: \"yet_another_example_vm\"\n    snapshot_name: \"pre-patching\"\n    state: \"remove\"\n  delegate_to: localhost\n```", "```\n- name: Revert to a snapshot\n  vmware_guest_snapshot:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    datacenter: \"my-datacenter\"\n    folder: \"/vms\"\n    name: \"yet_another_example_vm\"\n    snapshot_name: \"pre-patching\"\n    state: \"revert\"\n  delegate_to: localhost\n```", "```\n- name: Wait for VMware tools to become available by name\n  vmware_guest_tools_wait:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    folder: \"/vms\"\n    name: \"yet_another_example_vm\"\n  delegate_to: localhost\n  register: facts\n```", "```\n- name: Configure the hostname and dns servers\n  local_action\n    module: vmware_dns_config:\n    hostname: \"{{ exsi_host }}\"\n    username: \"{{ exsi_username }}\"\n    password: \"{{ exsi_password }}\"\n    validate_certs: \"no\"\n    change_hostname_to: \"esxi-host-01\"\n    domainname: \"my-domain.com\"\n    dns_servers:\n        - \"8.8.8.8\"\n        - \"8.8.4.4\"\n```", "```\n- name: gather facts on dns config\n  vmware_host_dns_facts:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    cluster_name: \"my_cluster\"\n```", "```\n- name: add an esxi host to vcenter\n  vmware_host:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    datacenter_name: \"my-datacenter\"\n    cluster_name: \"my_cluster\"\n    esxi_hostname: \"{{ exsi_host }}\"\n    esxi_username: \"{{ exsi_username }}\"\n    esxi_password: \"{{ exsi_password }}\"\n    state: present\n```", "```\n- name: reattach an esxi host to vcenter\n  vmware_host:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    datacenter_name: \"my-datacenter\"\n    cluster_name: \"my_cluster\"\n    esxi_hostname: \"{{ exsi_host }}\"\n    esxi_username: \"{{ exsi_username }}\"\n    esxi_password: \"{{ exsi_password }}\"\n    state: reconnect\n```", "```\n- name: remove an esxi host to vcenter\n  vmware_host:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    datacenter_name: \"my-datacenter\"\n    cluster_name: \"my_cluster\"\n    esxi_hostname: \"{{ exsi_host }}\"\n    esxi_username: \"{{ exsi_username }}\"\n    esxi_password: \"{{ exsi_password }}\"\n    state: absent\n```", "```\n- name: Find out facts on the esxi hosts\n  vmware_host_facts:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n  register: host_facts\n  delegate_to: localhost\n```", "```\n- name: Set acceptance level for all esxi hosts in the cluster\n  vmware_host_acceptance:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    cluster_name: \"my_cluster\"\n    acceptance_level: \"community\"\n    state: present\n  register: cluster_acceptance_level\n```", "```\n- name: Set some options on our esxi host\n  vmware_host_config_manager:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    esxi_hostname: \"{{ exsi_host }}\"\n    options:\n        \"Config.HostAgent.log.level\": \"verbose\"\n        \"Annotations.WelcomeMessage\": \"Welcome to my awesome Ansible managed ESXi host\"\n        \"Config.HostAgent.plugins.solo.enableMob\": \"false\"\n```", "```\n- name: Mount datastores on our cluster\n  vmware_host_datastore:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    datacenter_name: \"my-datacenter\"\n    datastore_name: \"{{ item.name }}\"\n    datastore_type: \"{{ item.type }}\"\n    nfs_server: \"{{ item.server }}\"\n    nfs_path: \"{{ item.path }}\"\n    nfs_ro: \"no\"\n    esxi_hostname: \"{{ inventory_hostname }}\"\n    state: present\n  delegate_to: localhost\n  with_items:\n      - { \"name\": \"ds_vol01\", \"server\": \"nas\", \"path\": \"/mnt/ds_vol01\", 'type': \"nfs\"} \n      - { \"name\": \"ds_vol02\", \"server\": \"nas\", \"path\": \"/mnt/ds_vol02\", 'type': \"nfs\"} \n      - { \"name\": \"ds_vol03\", \"server\": \"nas\", \"path\": \"/mnt/ds_vol03\", 'type': \"nfs\"} \n```", "```\n- name: set some firewall rules on the esxi hosts\n  vmware_host_firewall_manager:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    esxi_hostname: \"{{ inventory_hostname }}\"\n    rules:\n      - name: \"vvold\"\n        enabled: \"True\"\n      - name: \"CIMHttpServer\"\n        enabled: \"False\"\n```", "```\n- name: Get facts on all cluster hosts\n  vmware_host_firewall_facts:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    cluster_name: \"my_cluster\"\n```", "```\n- name: Get facts on a single host\n  vmware_host_firewall_facts:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    esxi_hostname: \"{{ exsi_host }}\"\n```", "```\n- name: Lockdown an ESXi host\n  vmware_host_lockdown:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    esxi_hostname: \"{{ exsi_host }}\"\n    state: \"present\"\n```", "```\n- name: Remove the lockdown on an ESXi host\n  vmware_host_lockdown:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    esxi_hostname: \"{{ exsi_host }}\"\n    state: \"absent\"\n```", "```\n- name: Lockdown all the ESXi hosts\n  vmware_host_lockdown:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    cluster_name: \"my_cluster\"\n    state: \"present\"\n```", "```\n- name: Set NTP servers for all hosts\n  vmware_host_ntp:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    cluster_name: \"my_cluster\"\n    state: present\n    ntp_servers:\n        - 0.pool.ntp.org\n        - 1.pool.ntp.org\n        - 2.pool.ntp.org\n```", "```\n- name: Find out facts about the packages on all the ESXi hosts\n  vmware_host_package_facts:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    cluster_name: \"my_cluster\"\n  register: cluster_packages\n```", "```\n- name: Find out facts about the packages on a single ESXi host\n  vmware_host_package_facts:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    esxi_hostname: \"{{ exsi_host }}\"\n  register: host_packages\n```", "```\n- name: Start the ntp service on all esxi hosts\n  vmware_host_service_manager:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    cluster_name: \"my_cluster\"\n    service_name: \"ntpd\"\n    service_policy: \"automatic\"\n    state: \"present\"\n```", "```\n- name: Find out facts about the services on all the ESXi hosts\n  vmware_host_service_facts:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    cluster_name: \"my_cluster\"\n  register: cluster_services\n```", "```\n- name: Find out facts about the datastores\n  vmware_datastore_facts:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    datacenter: \"my_datacenter\"\n  delegate_to: localhost\n  register: datastore_facts\n```", "```\n- name: Find out facts about the vmnics on all the ESXi hosts\n  vmware_host_vmnic_facts:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    datacenter: \"my_datacenter\"\n  register: cluster_vmnics\n```", "```\n- name: Find out facts about the vmnics on a single ESXi host\n  vmware_host_vmnic_facts:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    esxi_hostname: \"{{ exsi_host }}\"\n  register: host_vmnics\n```", "```\n- name: Add a local role\n  vmware_local_role_manager:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n  local_role_name: \"vmware_qa\"\n  local_privilege_ids: [ \"Folder.Create\", \"Folder.Delete\"]\n  state: \"present\"\n```", "```\n- name: Add local user to ESXi\n  vmware_local_user_manager:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    local_user_name: \"myuser\"\n    local_user_password: \"my-super-secret-password\"\n    local_user_description: \"An example user added by Ansible\"\n  delegate_to: \"localhost\"\n```", "```\n- name: Create an esxi host configuration backup\n  vmware_cfg_backup:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    state: \"saved\"\n    dest: \"/tmp/\"\n    esxi_hostname: \"{{ exsi_host }}\"\n  delegate_to: \"localhost\"\n  register: cfg_backup\n```", "```\n- name: Restore an esxi host configuration backup\n  vmware_cfg_backup:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n```", "```\n    validate_certs: \"no\"\n    state: \"loaded\"\n    dest: \"/tmp/my-host-backup.tar.gz\"\n    esxi_hostname: \"{{ exsi_host }}\"\n  delegate_to: \"localhost\"\n```", "```\n- name: Reset a host configuration to the default values\n  vmware_cfg_backup:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    state: \"absent\"\n    esxi_hostname: \"{{ exsi_host }}\"\n  delegate_to: \"localhost\"\n```", "```\n- name: Add management port with a static ip\n   vmware_vmkernel:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    esxi_hostname: \"{{ exsi_host }}\"\n  vswitch_name: \"my_vSwitch\"\n  portgroup_name: \"my_portgroup\"\n  vlan_id: \"the_vlan_id\"\n  network:\n    type: \"static\"\n    ip_address: \"192.168.127.10\"\n    subnet_mask: \"255.255.255.0\"\n  state: \"present\"\n  enable_mgmt: \"True\"\n```", "```\n- name: Find out facts about the vmkernel on all the ESXi hosts\n  vmware_vmkernel_facts:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    cluster_name: \"my_cluster\"\n  register: cluster_vmks\n\n- name: Find out facts about the vmkernel on a single ESXi host\n  vmware_vmkernel_facts:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    esxi_hostname: \"{{ exsi_host }}\"\n  register: host_vmks\n```", "```\n- name: Get Canonical name of SCSI device\n  vmware_target_canonical_facts\"\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    target_id: \"6\"\n   register: canonical_name\n```", "```\n- name: Perform vMotion of VM\n  vmware_vmotion\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    vm_name: \"example_vm\"\n    destination_host: \"esxi-host-02\"\n  delegate_to: \"localhost\"\n  register: vmotion_results\n```", "```\n- name: Configure VSAN on first host in the group\n  vmware_vsan_cluster:\n    hostname: \"{{ groups['esxi_hosts'][0] }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n  register: vsan_cluster\n```", "```\n- name: Configure VSAN on the remaining hosts in the group\n  vmware_vsan_cluster:\n    hostname: \"{{ item }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    cluster_uuid: \"{{ vsan_cluster.cluster_uuid }}\"\n  with_items: \"{{ groups['esxi_hosts'][1:] }}\"\n```", "```\n- name: Add a vSwitch\n  vmware_vswitch:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    switch: \"vswitch_name\"\n    nics:\n      - \"vmnic1\"\n      - \"vmnic2\"\n    mtu: \"9000\"\n  delegate_to: \"localhost\"\n```", "```\n- name: Find out facts about drs on all the hosts in the cluster\n  vmware_drs_rule_facts:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    cluster_name: \"my_cluster\"\n  delegate_to: \"localhost\"\n  register: cluster_drs\n\n- name: Find out facts about drs in a single data center\n  vmware_drs_rule_facts:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    datacenter: \"my_datacenter\"\n  delegate_to: \"localhost\"\n  register: datacenter_drs\n```", "```\n- name: Create dvswitch\n  vmware_dvswitch:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    datacenter: \"my_datacenter\"\n    switch_name: \"my_dvSwitch\"\n    switch_version: \"6.0.0\"\n    mtu: \"9000\"\n    uplink_quantity: \"2\"\n    discovery_proto: \"lldp\"\n    discovery_operation: \"both\"\n    state: present\n  delegate_to: \"localhost\"\n```", "```\n- name: Add host to dvs\n  vmware_dvs_host:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    esxi_hostname: \"{{ exsi_host }}\"\n    switch_name: \"my_dvSwitch\"\n    vmnics:\n      - \"vmnic1\"\n      - \"vmnic2\"\n    state: \"present\"\n  delegate_to: \"localhost\"\n```", "```\n- name: Create a portgroup with vlan \n  vmware_dvs_portgroup:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    portgroup_name: \"my_portgroup_vlan123\"\n    switch_name: \"my_dvSwitch\"\n    vlan_id: \"123\"\n    num_ports: \"120\"\n    portgroup_type: \"earlyBinding\"\n    state: \"present\"\n  delegate_to: \"localhost\"\n```", "```\n- name: Put host into maintenance mode\n  vmware_maintenancemode:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    esxi_hostname: \"{{ exsi_host }}\"\n    vsan: \"ensureObjectAccessibility\"\n    evacuate: \"yes\"\n    timeout: \"3600\"\n    state: \"present\"\n  delegate_to: \"localhost\"\n```", "```\n- name: Create a portgroup with vlan\n  vmware_portgroup:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    cluster_name: \"my_cluster\"\n    switch_name: \"my_switch\"\n    portgroup_name: \"my_portgroup_vlan123\"\n    vlan_id: \"123\"\n  delegate_to: \"localhost\"\n```", "```\n- name: Add resource pool\n  vmware_resource_pool:\n    hostname: \"{{ vsphere_host }}\"\n    username: \"{{ vsphere_username }}\"\n    password: \"{{ vsphere_password }}\"\n    validate_certs: \"no\"\n    datacenter: \"my_datacenter\"\n    cluster: \"my_new_cluster\"\n    resource_pool: \"my_resource_pool\"\n    mem_shares: \"normal\"\n    mem_limit: \"-1\"\n    mem_reservation: \"0\"\n    mem_expandable_reservations: \"True\"\n    cpu_shares: \"normal\"\n    cpu_limit: \"-1\"\n    cpu_reservation: \"0\"\n    cpu_expandable_reservations: \"True\"\n    state: present\n  delegate_to: \"localhost\"\n```", "```\nvcenter:\n  host: \"cluster.cloud.local\"\n  username: \"svc_ansible@cloud.local\"\n  password: \"mymegasecretpassword\"\n\nwait_for_ip_address: \"yes\"\nmachine_state: \"poweredon\"\n\ndeploy:\n  datacenter: \"Cloud DC4\"\n  folder: \"/vm/Ansible\"\n  resource_pool: \"/Resources/\"\n\nvm_shell:\n  username: \"root\"\n  password: \"hushdonttell\"\n  cwd: \"/tmp\"\n  cmd: \"/bin/sed\"\n  args: \"-i 's/GATEWAY=192.168.1.254/GATEWAY={{ item.gateway }}/g' /etc/sysconfig/network\"\n```", "```\nvm:\n  - name: \"NTPSERVER01\"\n    machine_name: \"ntpserver01\"\n    machine_template: \"RHEL6_TEMPLATE\"\n    guest_id: \"rhel6_64Guest\"\n    host: \"compute-host-01.cloud.local\"\n    cpu: \"1\"\n    ram: \"1024\"\n    networks: \n      - name: \"CLOUD-CUST|Customer|MANGMENT\"\n        ip: \"192.168.99.10\"\n        netmask: \"255.255.255.0\"\n        device_type: \"vmxnet3\"\n    gateway: \"192.168.99.254\"\n    disk:\n      - size_gb: \"30\"\n        type: \"thin\"\n        datastore: \"cust_sas_esx_nfs_01\"\n  - name: \"JUMPHOST01\"\n    machine_name: \"jumphost01\"\n    machine_template: \"RHEL6_TEMPLATE\"\n    guest_id: \"rhel6_64Guest\"\n    host: \"compute-host-02.cloud.local\"\n    cpu: \"1\"\n    ram: \"1024\"\n    networks: \n      - name: \"CLOUD-CUST|Customer|MANGMENT\"\n        ip: \"192.168.99.20\"\n        netmask: \"255.255.255.0\"\n        device_type: \"vmxnet3\"\n    gateway: \"192.168.99.254\"\n    disk:\n      - size_gb: \"30\"\n        type: \"thin\"\n        datastore: \"cust_sas_esx_nfs_01\"\n  - name: \"LOADBALANCER01\"\n    machine_name: \"loadbalancer01\"\n    machine_template: \"LB_TEMPLATE\"\n    guest_id: \"rhel6_64Guest\"\n    host: \"compute-host-03.cloud.local\"\n    cpu: \"4\"\n    ram: \"4048\"\n    networks: \n      - name: \"CLOUD-CUST|Customer|DMZ\"\n        ip: \"192.168.98.100\"\n        netmask: \"255.255.255.0\"\n        device_type: \"vmxnet3\"\n    gateway: \"192.168.99.254\"\n    disk:\n      - size_gb: \"30\"\n        type: \"thin\"\n        datastore: \"cust_sas_esx_nfs_02\"    \n  - name: \"WEBSERVER01\"\n    machine_name: \"webserver01\"\n    machine_template: \"RHEL6_TEMPLATE\"\n    guest_id: \"rhel6_64Guest\"\n    host: \"compute-host-01.cloud.local\"\n    cpu: \"1\"\n    ram: \"1024\"\n    networks: \n      - name: \"CLOUD-CUST|Customer|APP\"\n        ip: \"192.168.100.10\"\n        netmask: \"255.255.255.0\"\n        device_type: \"vmxnet3\"\n    gateway: \"192.168.100.254\"\n    disk:\n      - size_gb: \"30\"\n        type: \"thin\"\n        datastore: \"cust_sas_esx_nfs_01\"\n  - name: \"WEBSERVER02\"\n    machine_name: \"webserver02\"\n    machine_template: \"RHEL6_TEMPLATE\"\n    guest_id: \"rhel6_64Guest\"\n    host: \"compute-host-02.cloud.local\"\n    cpu: \"1\"\n    ram: \"1024\"\n    networks: \n      - name: \"CLOUD-CUST|Customer|APP\"\n        ip: \"192.168.100.20\"\n        netmask: \"255.255.255.0\"\n        device_type: \"vmxnet3\"\n    gateway: \"192.168.100.254\"\n    disk:\n      - size_gb: \"30\"\n        type: \"thin\"\n        datastore: \"cust_sas_esx_nfs_02\"      \n  - name: \"DBSERVER01\"\n    machine_name: \"dbserver01\"\n    machine_template: \"RHEL6_TEMPLATE\"\n    guest_id: \"rhel6_64Guest\"\n    host: \"compute-host-10.cloud.local\"\n    cpu: \"8\"\n    ram: \"32000\"\n    networks: \n      - name: \"CLOUD-CUST|Customer|DB\"\n        ip: \"192.168.101.10\"\n        netmask: \"255.255.255.0\"\n        device_type: \"vmxnet3\"\n    gateway: \"192.168.101.254\"\n    disk:\n      - size_gb: \"30\"\n        type: \"thin\"\n        datastore: \"cust_sas_esx_nfs_01\"\n      - size_gb: \"250\"\n        type: \"thick\"\n        datastore: \"cust_ssd_esx_nfs_01\" \n      - size_gb: \"250\"\n        type: \"thick\"\n        datastore: \"cust_ssd_esx_nfs_01\" \n      - size_gb: \"250\"\n        type: \"thick\"\n        datastore: \"cust_ssd_esx_nfs_01\" \n  - name: \"DBSERVER02\"\n    machine_name: \"dbserver02\"\n    machine_template: \"RHEL6_TEMPLATE\"\n    guest_id: \"rhel6_64Guest\"\n    host: \"compute-host-11.cloud.local\"\n    cpu: \"8\"\n    ram: \"32000\"\n    networks: \n      - name: \"CLOUD-CUST|Customer|DB\"\n        ip: \"192.168.101.11\"\n        netmask: \"255.255.255.0\"\n        device_type: \"vmxnet3\"\n    gateway: \"192.168.101.254\"\n    disk:\n      - size_gb: \"30\"\n        type: \"thin\"\n        datastore: \"cust_sas_esx_nfs_02\"\n      - size_gb: \"250\"\n        type: \"thick\"\n        datastore: \"cust_ssd_esx_nfs_02\" \n      - size_gb: \"250\"\n        type: \"thick\"\n        datastore: \"cust_ssd_esx_nfs_02\" \n      - size_gb: \"250\"\n        type: \"thick\"\n        datastore: \"cust_ssd_esx_nfs_02\"\n```", "```\n- name: Launch the VMs\n  vmware_guest:\n    hostname: \"{{vcenter.host}}\"\n    username: \"{{ vcenter.username }}\"\n    password: \"{{ vcenter.password }}\"\n    validate_certs: no\n    datacenter: \"{{ deploy.datacenter }}\"\n    folder: \"{{ deploy.folder }}\"\n    name: \"{{ item.machine_name | upper }}\"\n    state: \"{{ machine_state }}\"\n    guest_id: \"{{ item.guest_id }}\"\n    esxi_hostname: \"{{ item.host }}\"\n    hardware:\n      memory_mb: \"{{ item.ram }}\"\n      num_cpus: \"{{ item.cpu }}\"\n    networks: \"{{ item.networks }}\"\n    disk: \"{{ item.disk }}\"\n    template: \"{{ item.machine_template }}\"\n    wait_for_ip_address: \"{{ wait_for_ip_address }}\"\n    customization:\n      hostname: \"{{ item.machine_name | lower }}\"\n  with_items: \"{{ vm }}\"\n```", "```\n- name: Sort out the wrong IP address in the /etc/sysconfig/network file on the vms\n  vmware_vm_shell:\n    hostname: \"{{vcenter.host}}\"\n    username: \"{{ vcenter.username }}\"\n    password: \"{{ vcenter.password }}\"\n    validate_certs: no\n    vm_id: \"{{ item.machine_name | upper }}\"\n    vm_username: \"{{ vm_shell.username }}\"\n    vm_password: \"{{ vm_shell.password }}\"\n    vm_shell: \"{{ vm_shell.cmd }}\"\n    vm_shell_args: \" {{ vm_shell.args }} \"\n    vm_shell_cwd: \"{{ vm_shell.cwd }}\"\n  with_items: \"{{ vm }}\"\n```", "```\n- name: Restart networking on all VMs\n  vmware_vm_shell:\n    hostname: \"{{vcenter.host}}\"\n    username: \"{{ vcenter.username }}\"\n    password: \"{{ vcenter.password }}\"\n    validate_certs: no\n    vm_id: \"{{ item.machine_name | upper }}\"\n    vm_username: \"{{ vm_shell.username }}\"\n    vm_password: \"{{ vm_shell.password }}\"\n    vm_shell: \"/sbin/service\"\n    vm_shell_args: \"network restart\"\n  with_items: \"{{ vm }}\"\n```"]