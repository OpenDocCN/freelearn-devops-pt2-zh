# 前言

DevOps 是 2015 年的热门词汇，并且根据多家研究机构的市场趋势预测，未来几年仍将如此。在 DevOps 文化中，业务所有者、开发团队、运维团队和 QA 团队协同工作，以持续且高效的方式交付成果。它使组织能够更快地抓住机遇，并缩短将客户反馈纳入新功能开发或创新的时间。DevOps 的最终目标是缩短从初始概念到以生产就绪应用程序形式呈现的概念结果之间的时间。DevOps 关注应用程序交付、新功能开发、错误修复、测试和维护版本。它提高了效率、安全性、可靠性、可预测性以及更快的开发和部署周期。它涵盖了从开发、测试、运维到发布的所有 SDLC 阶段。

持续集成（CI）和持续交付（CD）是 DevOps 文化的重要组成部分。Jenkins 是一个功能全面的技术平台，使用户能够实施 CI 和 CD。这有助于用户通过自动化应用程序交付生命周期来提供更好的应用程序。CI 包括构建、测试和打包过程的自动化。CD 包括跨不同环境的应用程序交付管道。Jenkins 使用户能够在敏捷环境中为软件开发利用持续集成服务。持续集成系统是敏捷团队的重要组成部分，因为它们有助于强化敏捷开发的原理。持续集成是 DevOps 文化的重要组成部分，因此，许多开源和商业的持续交付工具都利用 Jenkins 或提供集成点。Jenkins 使敏捷团队能够专注于工作和创新，通过自动化构建、制品管理和部署过程，而不是担心手动过程。它可以用于基于 Apache Ant 和 Maven 2 / Maven 3 项目的自由风格软件项目构建。它还可以执行 Windows 批处理命令和 shell 脚本。

安装 Jenkins 有多种方式，并且可以在不同的平台上使用，如 Windows 和 Linux。Jenkins 以 Windows、FreeBSD、OpenBSD、Red Hat、Fedora、CentOS、Ubuntu、Debian、Mac OS X、openSUSE、Solaris、OpenIndiana、Gentoo 的原生包形式提供，或者以 WAR 文件的形式提供。使用 Jenkins 最快捷简便的方式是使用 WAR 文件。它可以通过使用插件轻松定制。有各种类型的插件可根据特定需求定制 Jenkins。插件类别包括源代码管理（例如，Git 插件、CVS 插件、Bazaar 插件）、构建触发器（例如，加速构建现在插件和构建流插件）、构建报告（例如，代码扫描器插件和磁盘使用插件）、身份验证和用户管理（例如，活动目录插件和 Github OAuth 插件）、集群管理和分布式构建（例如，亚马逊 EC2 插件和 Azure 从属插件）等。

Jenkins 因其允许用户管理和控制构建、测试、打包和静态代码分析等阶段而深受用户欢迎。它赢得了 2011 年 InfoWorld Bossies 奖、2011 年 O'Reilly 开源奖、ALM&SCM 等奖项。Jenkins 的主要用户包括 NASA、Linkedin、eBay 和 Mozilla 基金会。

以下是使 Jenkins 非常受欢迎的一些特点：

+   一个具有 Web GUI 的开源工具。

+   基于 Java 的持续构建系统——易于编写插件。

+   高度可配置的工具——基于插件的架构，支持多种技术、仓库、构建工具和测试工具。

+   Jenkins 用户社区庞大且活跃，拥有超过 1,000 个开源插件。

+   支持.Net、iOS、Android 和 Ruby 开发的持续集成。

+   支持常见的 SCM 系统，如 SVN、CVS、Git 等。

+   支持常见的测试框架，如 Junit、Selenium 等。

Jenkins 通过自动化跨不同阶段（如构建、测试、代码分析等）加速应用程序开发过程。它还使用户能够实现应用程序交付生命周期的端到端自动化。

# 本书涵盖的内容

第一章，*探索 Jenkins*，详细介绍了持续集成的基本概念，并提供了 Jenkins 的概览。本章还描述了 Jenkins 的安装和配置过程，并快速浏览了 Jenkins 的一些关键特性和插件安装。此外，本章还将涵盖部署管道的内容，而其余章节将详细介绍其实施。

第二章，*代码仓库和构建工具的安装与配置*，详细描述了如何为应用程序生命周期管理准备运行时环境，并将其与 Jenkins——一个开源的持续集成工具——进行配置。它将介绍如何将 Eclipse 与 SVN 和 Git 等代码仓库集成，为部署管道中的持续集成创建基础，这在第一章，*探索 Jenkins*中有所解释。

第三章，*Jenkins、SVN 与构建工具的集成*，详细描述了如何为 Java 应用程序创建和配置构建作业，以及如何运行构建作业和单元测试案例。它涵盖了从运行构建到创建部署所需的发行文件或 WAR 文件的所有方面。

第四章，*实施自动化部署*，在部署管道中向前迈进一步，通过在本地或远程应用程序服务器上部署工件。它将深入探讨自动化部署和持续交付过程，并介绍如何使用 Jenkins 在公共云平台上部署应用程序。

第五章，*托管 Jenkins*，描述了如何在平台即服务（PaaS）模型上使用 Jenkins，该模型由 Red Hat OpenShift 和 CloudBees 等流行的 PaaS 提供商提供。以 CloudBees 为例，本章还详细介绍了不同客户如何根据其需求使用 Jenkins。本章将探讨如何在 Jenkins 中使用与云相关的插件以有效利用 Jenkins。

第六章，*管理代码质量和通知*，介绍了如何将静态代码分析行为集成到 Jenkins 中。代码质量是影响应用程序效能的极其重要的特性，通过与 Sonar、CheckStyle、FindBug 等工具集成，你可以深入了解代码中的问题部分。

第七章，*管理和监控 Jenkins*，深入探讨了 Jenkins 节点的管理以及使用 Java Melody 监控它们以提供资源利用情况的详细信息。本章还涵盖了如何监控为 Java 应用程序配置的构建作业，以及如何通过备份来管理这些配置。此外，本章讨论了 Jenkins 中可用的基本安全配置，以实现更好的访问控制和授权。

第八章，*超越 Jenkins 基础——利用“必备”插件*，涵盖了 Jenkins 在特定场景下极其有用的高级用法。本章介绍了基于场景的使用案例以及有助于开发和运维团队的具体插件，以更好地利用 Jenkins。

# 本书所需条件

本书假设您至少熟悉 Java 编程语言。掌握核心 Java 和 JEE 知识是必要的。对程序逻辑有深刻理解将为您在使用 Jenkins 插件和编写 shell 命令时提供背景，从而提高效率。

由于应用程序开发生命周期通常会涉及许多工具，因此了解诸如 SVN、Git 等版本控制系统；如 Eclipse 等 IDE 工具；以及如 Ant 和 Maven 等构建工具的知识是必要的。

了解代码分析工具将使配置和集成工作更轻松；然而，对于本书中的练习来说，这并不是极其关键的。大多数配置步骤都已清晰说明。

本书将引导您完成在基于 Windows 和 Linux 的主机上安装 Jenkins 的步骤。为了立即取得成功，您需要拥有运行现代 Linux 版本的宿主机的管理员权限；CentOS 6.x 将用于演示目的。如果您是更有经验的读者，那么几乎任何最新发布的发行版都能同样适用（但您可能需要做一些本书未详细说明的额外工作）。如果您没有访问专用 Linux 主机的权限，虚拟主机（或多个虚拟主机）在 VirtualBox 或 VMware 工作站等虚拟化软件中运行也可以。

此外，您需要访问互联网以下载您尚未拥有的插件并安装 Jenkins。

# 本书适合的读者

本书面向参与应用程序开发生命周期并寻求自动化流程的开发者和系统管理员。开发者、技术负责人、测试人员和运维专业人士是本书的目标读者，旨在帮助他们快速上手 Jenkins。读者了解开发和运维团队面临的问题，因为他们是应用程序生命周期管理过程中的利益相关者。启动 Jenkins 的原因在于理解在持续集成、自动化测试案例执行和持续交付中贡献的重要性，以实现有效的应用程序生命周期管理。

# 约定

在本书中，您会发现多种文本样式，用以区分不同类型的信息。以下是这些样式的示例及其含义的解释。

文本中的代码词汇、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 手柄等，如下所示："通过执行`git commit -m "初始提交" –a`来提交。"

任何命令行输入或输出如下所示：

```
[root@localhost testmit]# service httpd restart
Stopping httpd:
[  OK  ]

```

新术语和重要词汇以粗体显示。屏幕上出现的词汇，如菜单或对话框中的词汇，在文本中这样显示："一旦构建成功，请在构建作业中验证**工作区**。"

### 注意

警告或重要提示以这样的方框形式出现。

### 提示

提示和技巧这样显示。
