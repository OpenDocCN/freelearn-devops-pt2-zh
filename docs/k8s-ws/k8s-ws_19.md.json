["```\nkubectl api-resources\n```", "```\nkubectl api-versions\n```", "```\napiVersion: \"controllers.kube.book.au/v1\"\nkind: PodLifecycleConfig\nmetadata:\n\u00a0\u00a0name: demo-pod-lifecycle\nspec:\n\u00a0\u00a0namespaceName: crddemo\n\u00a0\u00a0podLiveForThisMinutes: 1\n```", "```\n1\u00a0\u00a0apiVersion: apiextensions.k8s.io/v1beta1\n2\u00a0\u00a0kind: CustomResourceDefinition\n3\u00a0\u00a0metadata:\n4\u00a0\u00a0\u00a0\u00a0name: podlifecycleconfigs.controllers.kube.book.au\n5\u00a0\u00a0spec:\n6\u00a0\u00a0\u00a0\u00a0group: controllers.kube.book.au\n7\u00a0\u00a0\u00a0\u00a0version: v1\n8\u00a0\u00a0\u00a0\u00a0scope: Namespaced\n9\u00a0\u00a0\u00a0\u00a0names:\n10\u00a0\u00a0\u00a0\u00a0\u00a0kind: PodLifecycleConfig\n11\u00a0\u00a0\u00a0\u00a0\u00a0plural: podlifecycleconfigs\n12\u00a0\u00a0\u00a0\u00a0\u00a0singular: podlifecycleconfig\n13\u00a0\u00a0#1.15 preserveUnknownFields: false\n14\u00a0\u00a0\u00a0validation:\n15\u00a0\u00a0\u00a0\u00a0\u00a0openAPIV3Schema:\n16\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0type: object\n17\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0properties:\n18\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0spec:\n19\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0type: object\n20\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0properties:\n21\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0namespaceName:\n22\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0type: string\n23\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0podLiveForThisMinutes:\n24\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0type: integer\n```", "```\n    kubectl create ns crddemo\n    ```", "```\n    namespace/crddemo created\n    ```", "```\n    apiVersion: apiextensions.k8s.io/v1beta1\n    kind: CustomResourceDefinition\n    metadata:\n    \u00a0\u00a0name: podlifecycleconfigs.controllers.kube.book.au\n    spec:\n    \u00a0\u00a0group: controllers.kube.book.au\n    \u00a0\u00a0version: v1\n    \u00a0\u00a0scope: Namespaced\n    \u00a0\u00a0names:\n    \u00a0\u00a0\u00a0\u00a0kind: PodLifecycleConfig\n    \u00a0\u00a0\u00a0\u00a0plural: podlifecycleconfigs\n    \u00a0\u00a0\u00a0\u00a0singular: podlifecycleconfig\n    \u00a0\u00a0#1.15 preserveUnknownFields: false\n    \u00a0\u00a0validation:\n    \u00a0\u00a0\u00a0\u00a0openAPIV3Schema:\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0type: object\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0properties:\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0spec:\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0type: object\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0properties:\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0namespaceName:\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0type: string\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0podLiveForThisMinutes:\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0type: integer\n    ```", "```\n    kubectl create -f pod-normaliser-crd.yaml -n crddemo\n    ```", "```\n    kubectl api-resources | grep podlifecycleconfig\n    ```", "```\n    kubectl api-versions | grep controller\n    ```", "```\n    controllers.kube.book.au/v1\n    ```", "```\n    kubectl get podlifecycleconfigs -n crddemo\n    ```", "```\n    No resources found.\n    ```", "```\n    kubectl delete podlifecycleconfig <RESOURCE_NAME> -n crddemo\n    ```", "```\n    apiVersion: \"controllers.kube.book.au/v1\"\n    kind: PodLifecycleConfig\n    metadata:\n    \u00a0\u00a0name: demo-pod-lifecycle\n    \u00a0\u00a0# namespace: \"crddemo\"\n    spec:\n    \u00a0\u00a0namespaceName: crddemo\n    \u00a0\u00a0podLiveForThisMinutes: 1\n    ```", "```\n    kubectl create -f pod-normaliser.yaml -n crddemo\n    ```", "```\n    kubectl get podlifecycleconfigs -n crddemo\n    ```", "```\n    NAME                  AGE\n    demo-pod-lifecycle    48s\n    ```", "```\n12\u00a0type PodLifecycleConfig struct {\n13\n14\u00a0\u00a0\u00a0\u00a0\u00a0// TypeMeta is the metadata for the resource, like kind and           apiversion\n15\u00a0\u00a0\u00a0\u00a0\u00a0meta_v1.TypeMeta `json:\",inline\"`\n16\n17\u00a0\u00a0\u00a0\u00a0\u00a0// ObjectMeta contains the metadata for the particular           object like labels\n18\u00a0\u00a0\u00a0\u00a0\u00a0meta_v1.ObjectMeta `json:\"metadata,omitempty\"`\n19\n20\u00a0\u00a0\u00a0\u00a0\u00a0Spec PodLifecycleConfigSpec `json:\"spec\"`\n21\u00a0}\n22\n23\u00a0type PodLifecycleConfigSpec struct{\n24\u00a0\u00a0\u00a0\u00a0\u00a0NamespaceName\u00a0\u00a0 string `json:\"namespaceName\"`\n25\u00a0\u00a0\u00a0\u00a0\u00a0PodLiveForMinutes int `json:\"podLiveForThisMinutes\"`\n26\u00a0}\n...\n32\u00a0type PodLifecycleConfigList struct {\n33\u00a0\u00a0\u00a0\u00a0\u00a0meta_v1.TypeMeta `json:\",inline\"`\n34\u00a0\u00a0\u00a0\u00a0\u00a0meta_v1.ListMeta `json:\"metadata\"`\n35\n36\u00a0\u00a0\u00a0\u00a0\u00a0Items []PodLifecycleConfig `json:\"items\"`\n37\u00a0}\n```", "```\napiVersion: \"controllers.kube.book.au/v1\"\nkind: PodLifecycleConfig\nmetadata:\n\u00a0\u00a0name: demo-pod-lifecycle\n\u00a0\u00a0# namespace: \"crddemo\"\nspec:\n\u00a0\u00a0namespaceName: crddemo\n\u00a0\u00a0podLiveForThisMinutes: 1\n```", "```\n40\u00a0// create the kubernetes client configuration\n41\u00a0\u00a0\u00a0\u00a0\u00a0config, err := clientcmd.BuildConfigFromFlags(\"\", \"\")\n42\u00a0\u00a0\u00a0\u00a0\u00a0if err != nil {\n43\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0log.Fatal(err)\n44\u00a0\u00a0\u00a0\u00a0\u00a0}\n45\n46\u00a0\u00a0\u00a0\u00a0\u00a0// create the kubernetes client\n47\u00a0\u00a0\u00a0\u00a0\u00a0podlifecyelconfgiclient, err := clientset.NewForConfig(config)\n48\n49\n50\u00a0\u00a0\u00a0\u00a0\u00a0// create the shared informer factory and use the client           to connect to kubernetes\n51\u00a0\u00a0\u00a0\u00a0\u00a0podlifecycleconfigfactory :=          informers.NewSharedInformerFactoryWithOptions            (podlifecyelconfgiclient, Second*30,\n52\u00a0\u00a0\u00a0\u00a0\u00a0informers.WithNamespace(os.Getenv(NAMESPACE_TO_WATCH)))\n```", "```\n62\u00a0// fetch the informer for the PodLifecycleConfig\n63\u00a0podlifecycleconfiginformer :=      podlifecycleconfigfactory.Controllers().V1().     PodLifecycleConfigs().Informer()\n64\n65\u00a0// register with the informer for the events\n66\u00a0podlifecycleconfiginformer.AddEventHandler(\n...\n69\u00a0//define what to do in case if a new custom resource is created\n70\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0AddFunc: func(obj interface{}) {\n...\n83\u00a0// start the subroutine to check and kill the pods for this namespace\n84\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0go checkAndRemovePodsPeriodically(signal, podclientset, x)\n85 \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0},\n86\n87\u00a0//define what to do in case if a\u00a0\u00a0custom resource is removed\n88\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0DeleteFunc: func(obj interface{}) {\n```", "```\n    git clone\u00a0\u00a0https://github.com/PacktWorkshops/Kubernetes-Workshop.git \n    cd Chapter19/Activity19.01/controller\n    ```", "```\n    name: podlifecycleconfigs.controllers.kube.book.au\n    ```", "```\n    openAPIV3Schema:\n    \u00a0\u00a0type: object\n    \u00a0\u00a0properties:\n    \u00a0\u00a0\u00a0\u00a0spec:\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0type: object\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0properties:\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0namespaceName:\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0type: string\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0podLiveForThisMinutes:\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0type: integer\n    ```", "```\n    rules:\n    - apiGroups: [\"controllers.kube.book.au\"]\n    \u00a0\u00a0resources: [\"podlifecycleconfigs\"]\n    \u00a0\u00a0verbs: [\"get\", \"list\", \"watch\"]\n    - apiGroups: [\"\"] \n    \u00a0\u00a0resources: [\"pods\"]\n    \u00a0\u00a0verbs: [\"get\", \"watch\", \"list\", \"delete\"]\n    ```", "```\nkubectl get PodLifecycleConfig -n crddemo\n```", "```\nNAME                AGE\ndemo-pod-lifecycle  8h\n```", "```\nkubectl get deployment -n crddemo\n```", "```\nNAME          READY    UP-TO-DATE   AVAILABLE   AGE\ncrd-server    1/1      1            1           166m\n```", "```\n    apiVersion: apiextensions.k8s.io/v1beta1\n    kind: CustomResourceDefinition\n    metadata:\n    \u00a0\u00a0name: podlifecycleconfigsadv.controllers.kube.book.au\n    spec:\n    \u00a0\u00a0group: controllers.kube.book.au\n    \u00a0\u00a0version: v1\n    \u00a0\u00a0scope: Namespaced\n    \u00a0\u00a0names:\n    \u00a0\u00a0\u00a0\u00a0kind: PodLifecycleConfigAdv\n    \u00a0\u00a0\u00a0\u00a0plural: podlifecycleconfigsadv\n    \u00a0\u00a0\u00a0\u00a0singular: podlifecycleconfigadv\n    \u00a0\u00a0#1.15 preserveUnknownFields: false\n    \u00a0\u00a0validation:\n    \u00a0\u00a0\u00a0\u00a0openAPIV3Schema:\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0type: object\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0properties:\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0spec:\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0type: object\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0properties:\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0namespaceName:\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0type: string\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0podLiveForThisMinutes:\n    \u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0type: integer\u00a0\u00a0\u00a0\u00a0\n    \u00a0\u00a0additionalPrinterColumns:\n    \u00a0\u00a0- name: NamespaceName\n    \u00a0\u00a0\u00a0\u00a0type: string\n    \u00a0\u00a0\u00a0\u00a0description: The name of the namespace this CRD is applied       to.\n    \u00a0\u00a0\u00a0\u00a0JSONPath: .spec.namespaceName\n    \u00a0\u00a0- name: PodLiveForMinutes\n    \u00a0\u00a0\u00a0\u00a0type: integer\n    \u00a0\u00a0\u00a0\u00a0description: Allowed number of minutes for the Pod to       survive\n    \u00a0\u00a0\u00a0\u00a0JSONPath: .spec.podLiveForThisMinutes\n    \u00a0\u00a0- name: Age\n    \u00a0\u00a0\u00a0\u00a0type: date\n    \u00a0\u00a0\u00a0\u00a0JSONPath: .metadata.creationTimestamp\n    ```", "```\n    kubectl create -f pod-normaliser-crd-adv.yaml -n crddemo\n    ```", "```\n    apiVersion: \"controllers.kube.book.au/v1\"\n    kind: PodLifecycleConfigAdv\n    metadata:\n    \u00a0\u00a0name: demo-pod-lifecycle-adv\n    \u00a0\u00a0# namespace: \"crddemo\"\n    spec:\n    \u00a0\u00a0namespaceName: crddemo\n    \u00a0\u00a0podLiveForThisMinutes: 20\n    ```", "```\n    kubectl create -f pod-normaliser-adv.yaml -n crddemo\n    ```", "```\n    kubectl get PodLifecycleConfigAdv -n crddemo\n    ```", "```\n    NAME                    NAMESPACENAME  PODLIVEFORMINUTES  AGE\n    demo-pod-lifecycle-adv  crddemo        20                 27m\n    ```"]