# 前言

随着大多数公司转向云端，基础设施需求呈指数增长。不断增长的数据和存储、分析和处理这些数据所需的大量计算能力增加了基础设施需求。随着互联网服务用户数量不断增加，以及伴随着数据挖掘竞赛而带来的海量数据涌入，大数据和云服务开辟了新的数据中心并扩展了现有的数据中心。此外，随着基础设施不断扩展和需求不断增加，以及保持 99.9%的正常运行时间承诺，自动化管理基础设施成为当务之急。DevOps 很快成为一种必要性，市场上涌现出大量的 DevOps 工具。Ansible 是这样一种开源解决方案，它将编排、配置管理和应用程序部署功能结合在一起。

Ansible 是一种 IT 自动化工具，可以让您管理基础设施作为代码。它帮助您部署应用程序并管理配置，从而使生活更轻松。它是一个建立在 Python 上的开源项目，并拥有强大的社区支持。在大多数情况下，Ansible 足以满足您的大部分需求。有许多模块和插件可用，Ansible 使一切看起来如此简单。编写和理解 playbooks 非常顺畅。

本书旨在面向已经具有 Ansible 工作知识的高级用户，我们将讨论 Ansible 暴露的各种扩展点，以及如何利用它们来满足我们的需求。本书详细介绍了 Ansible Python API、Ansible 模块和 Ansible 插件。通过现实生活场景，本书演示了如何扩展 Ansible 以满足您的需求。本书将带您逐步了解如何填补空白，成为 Ansible 的专家。

# 本书内容

第一章, *开始使用 Ansible*，是一个介绍性章节，向您介绍了 Ansible，并鼓励您成为一个高级用户。它向您介绍了 Ansible 的架构，并给出了选择 Ansible 作为基础设施和配置管理工具的理由。

第二章, *了解 Ansible 模块*，介绍了编写 Ansible 模块的基础知识。它向您介绍了 AnsibleModule 样板。本章还帮助您使用 Bash 和 Python 开发示例 Ansible 模块。

第三章 *深入了解 Ansible 模块*，介绍了如何处理 Ansible 模块中的参数。它还通过开发自定义 Ansible 模块的场景带您了解收集基础设施信息的过程。

第四章 *探索 API*，详细介绍了 Ansible 的 Python API，以编程方式运行 Ansible，并讨论了 Ansible 提供的各种扩展点。它深入讨论了插件加载器、运行器、Playbooks 和回调等主题。

第五章 *深入了解 Ansible 插件*，涵盖了不同插件的代码级别。它还演示了如何通过几个示例编写自己的 Ansible 插件。

第六章 *将所有内容整合在一起-集成*，涵盖了 Ansible 的各种配置选项，从而使用户充分利用该工具。本章介绍了 Ansible Galaxy，这是一个分享角色的平台。它带领读者了解了如何贡献给 Ansible 并分发他们的模块和插件的过程。

第七章 *成为大师-完整配置指南*，包含了可以利用 Ansible 的强大功能执行所需任务的实际场景。还包括了可以进一步使用 Ansible 作为基础设施和配置管理工具的场景。

# 本书所需内容

要充分利用本书，您需要以下内容：

+   Linux 发行版（Fedora/Ubuntu）

+   Ansible

+   Python

# 本书适合对象

本书非常适合熟悉 Ansible 和 Python 编程但不了解如何自定义 Ansible 的开发人员和管理员。

# 约定

在本书中，您将找到许多文本样式，用于区分不同类型的信息。以下是这些样式的一些示例及其含义的解释。

文本中的代码词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄显示如下："配置文件中由`library`变量指定的路径，位于`/etc/ansible/ansible.cfg`。"

代码块设置如下：

```
[default]
exten => s,1,Dial(Zap/1|30)
exten => s,2,Voicemail(u100)
exten => s,102,Voicemail(b100)
exten => i,1,Voicemail(s0)
```

当我们希望引起您对代码块的特定部分的注意时，相关行或项目会以粗体显示：

```
[default]
exten => s,1,Dial(Zap/1|30)
exten => s,2,Voicemail(u100)
**exten => s,102,Voicemail(b100)**
exten => i,1,Voicemail(s0)
```

任何命令行输入或输出都会以以下方式书写：

```
**# cp /usr/src/asterisk-addons/configs/cdr_mysql.conf.sample**
 **/etc/asterisk/cdr_mysql.conf**

```

**新术语**和**重要单词**以粗体显示。您在屏幕上看到的单词，例如菜单或对话框中的单词，会在文本中显示为这样：“通过使用菜单中的**添加角色**选项并提供所需的凭据，Galaxy 将从您的 GitHub 存储库导入角色，并在 Galaxy 平台上为整个社区提供。”

### 注意

警告或重要提示会显示在这样的框中。

### 提示

提示和技巧会显示为这样。
