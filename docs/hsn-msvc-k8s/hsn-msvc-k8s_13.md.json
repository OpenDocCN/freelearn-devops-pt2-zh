["```\n$ kubectl -n istio-system get po\n\nNAME READY STATUS RESTARTS AGE\nistio-citadel-6995f7bd9-69qhw 1/1 Running 0 11h\nistio-cleanup-secrets-6xkjx 0/1 Completed 0 11h\nistio-egressgateway-57b96d87bd-8lld5 1/1 Running 0 11h\nistio-galley-6d7dd498f6-pm8zz 1/1 Running 0 11h\nistio-ingressgateway-ddd557db7-b4mqq 1/1 Running 0 11h\nistio-pilot-5765d76b8c-l9n5n 2/2 Running 0 11h\nistio-policy-5b47b88467-tfq4b 2/2 Running 0 11h\nistio-sidecar-injector-6b9fbbfcf6-vv2pt 1/1 Running 0 11h\nistio-telemetry-65dcd9ff85-dxrhf 2/2 Running 0 11h\npromsd-7b49dcb96c-cn49l 2/2 Running 1 11h\n```", "```\napiVersion: networking.istio.io/v1alpha3\nkind: VirtualService\nmetadata:\n name: link-manager\nspec:\n  hosts:\n  - link-manager # same as link-manager.default.svc.cluster.local\n  http:\n  - route:\n    - destination:\n        host: link-manager\n```", "```\napiVersion: networking.istio.io/v1alpha3\nkind: DestinationRule\nmetadata:\n  name: link-manager\nspec:\n  host: link-manager\n  trafficPolicy:\n    loadBalancer:\n      simple: ROUND_ROBIN\n```", "```\napiVersion: networking.istio.io/v1alpha3\nkind: DestinationRule\nmetadata:\n  name: link-manager\nspec:\n  host: link-manager\n  trafficPolicy:\n    portLevelSettings:\n    - port:\n        number: 80\n      loadBalancer:\n        simple: LEAST_CONN\n    - port:\n        number: 8080\n      loadBalancer:\n        simple: ROUND_ROBIN\n```", "```\napiVersion: networking.istio.io/v1alpha3\nkind: DestinationRule\nmetadata:\n   name: link-manager\nspec:\n  host: link-manager\n  trafficPolicy:\n     connectionPool:\n       tcp:\n         maxConnections: 200\n         connectTimeout: 45ms\n         tcpKeepalive:\n           time: 3600s\n           interval: 75s\n```", "```\napiVersion: networking.istio.io/v1alpha3\nkind: DestinationRule\nmetadata:\n  name: link-manager\nspec:\n  host: link-manager\n  trafficPolicy:\n     outlierDetection:\n       consecutiveErrors: 10\n       interval: 2m\n       baseEjectionTime: 5m\n```", "```\napiVersion: networking.istio.io/v1alpha3\nkind: VirtualService\nmetadata:\n   name: link-manager\n spec:\n   hosts:\n   - link-manager\n   http:\n   - fault:\n       delay:\n         percent: 10\n         fixedDelay: 5s\n```", "```\napiVersion: networking.istio.io/v1alpha3\nkind: VirtualService\nmetadata:\n  name: link-service\nspec:\n  hosts:\n    - reviews\n  http:\n  - route:\n    - destination:\n        host: link-service\n        subset: v1\n       weight: 95\n     - destination:\n         host: reviews\n         subset: v2\n       weight: 5\n```", "```\napiVersion: networking.istio.io/v1alpha3\n kind: DestinationRule\n metadata:\n   name: link-manager\n spec:\n   host: link-manager\n   subsets:\n   - name: v1\n     labels:\n       version: v1\n   - name: v2\n     labels:\n       version: v2\n```", "```\napiVersion: \"authentication.istio.io/v1alpha1\"\n kind: \"MeshPolicy\"\n metadata:\n   name: \"default\"\n spec:\n   peers:\n   - mtls: {}\n```", "```\napiVersion: \"authentication.istio.io/v1alpha1\"\n kind: \"Policy\"\n metadata:\n   name: \"default\"\n   namespace: \"some-ns\"\n spec:\n   targets:\n    - name: api-gateway\n    - name: link-manager\n      ports:\n      - number: 8080\n```", "```\npeers:\n   - mtls: {}\n```", "```\norigins:\n - jwt:\n     issuer: \"https://accounts.google.com\"\n     jwksUri: \"https://www.googleapis.com/oauth2/v3/certs\"\n     trigger_rules:\n     - excluded_paths:\n       - exact: /healthcheck\n```", "```\nprincipalBinding: USE_ORIGIN\n```", "```\napiVersion: \"rbac.istio.io/v1alpha1\"\n kind: ClusterRbacConfig\n metadata:\n   name: default\n spec:\n   mode: 'ON_WITH_EXCLUSION'\n   exclusion:\n     namespaces: [\"kube-system\", \"development\"]\n```", "```\napiVersion: \"rbac.istio.io/v1alpha1\"\n kind: ServiceRole\n metadata:\n   name: full-access-reader\n   namespace: default\n spec:\n   rules:\n   - services: [\"*-manager\", \"api-gateway\"]\n     paths:\n     methods: [\"GET\", \"HEAD\"]\n```", "```\napiVersion: \"rbac.istio.io/v1alpha1\"\n kind: ServiceRoleBinding\n metadata:\n   name: test-binding-products\n   namespace: default\n spec:\n   subjects:\n   - user: \"service-account-delinkcious\"\n   - user: \"istio-ingress-service-account\"\n     properties:\n       request.auth.claims[email]: \"the.gigi@gmail.com\"\n   roleRef:\n     kind: ServiceRole\n     name: \"full-access-reader\"\n```", "```\n--set global.disablePolicyChecks=false.\n```", "```\n$ kubectl -n istio-system get cm istio -o jsonpath=\"{@.data.mesh}\" | grep disablePolicyChecks\ndisablePolicyChecks: false\n```", "```\napiVersion: config.istio.io/v1alpha2\n kind: instance\n metadata:\n   name: request-count\n   namespace: istio-system\n spec:\n   compiledTemplate: metric\n   params:\n     value: \"1\" # count each request\n     dimensions:\n       reporter: conditional((context.reporter.kind | \"inbound\") == \"outbound\", \"client\", \"server\")\n       source: source.workload.name | \"unknown\"\n       destination: destination.workload.name | \"unknown\"\n       message: '\"counting requests...\"'\n     monitored_resource_type: '\"UNSPECIFIED\"'\n\n```", "```\n\napiVersion：config.istio.io/v1alpha2\n\n种类：处理程序\n\n元数据：\n\n名称：request-count-handler\n\n命名空间：istio-system\n\n规范：\n\ncompiledAdapter：prometheus\n\n参数：\n\n指标：\n\n- 名称：request_count # Prometheus 指标名称\n\ninstance_name：request-count.instance.istio-system # Mixer 实例名称（完全合格）\n\n种类：计数器\n\n标签名称：\n\n- 记者\n\n- 来源\n\n- 目的地\n\n- 消息\n\n```", "```\n\napiVersion：config.istio.io/v1alpha2\n\n种类：规则\n\n元数据：\n\n名称：prom-request-counter\n\n命名空间：istio-system\n\n规范：\n\n操作：\n\n- 处理程序：request-count-handler\n\n实例：[request-count]\n\n```", "```\n\n$ kubectl get secret | grep mutual\n\nlink-mutual-auth             Opaque          1      9d\n\nsocial-graph-mutual-auth    Opaque          1      5d19h\n\n```", "```\n\n规格：\n\n容器：\n\n- 名称：link-manager\n\n图像：g1g1/delinkcious-link:0.3\n\nimagePullPolicy：Always\n\n端口：\n\n- containerPort：8080\n\nenvFrom：\n\n- configMapRef：\n\n名称：link-manager-config\n\nvolumeMounts：\n\n- 名称：mutual-auth\n\n挂载路径：/etc/delinkcious\n\nreadOnly：true\n\n卷：\n\n- 名称：mutual-auth\n\n秘密：\n\nsecretName：link-mutual-auth\n\n```", "```\n\n// encodeHTTPGenericRequest is a transport/http.EncodeRequestFunc that\n\n// JSON-encodes any request to the request body. Primarily useful in a client.\n\nfunc encodeHTTPGenericRequest(_ context.Context, r *http.Request, request interface{}) error {\n\nvar buf bytes.Buffer\n\n如果 err：= json.NewEncoder(&buf).Encode(request); err！= nil {\n\nreturn err\n\n}\n\nr.Body = ioutil.NopCloser(&buf)\n\n如果 os.Getenv(\"DELINKCIOUS_MUTUAL_AUTH\")！= \"false\" {\n\ntoken：= auth_util.GetToken(SERVICE_NAME)\n\nr.Header[\"Delinkcious-Caller-Token\"] = []string{token}\n\n}\n\nreturn nil\n\n}\n\n```", "```\n\nfunc decodeGetFollowersRequest(_ context.Context, r *http.Request) (interface{}, error){\n\n如果 os.Getenv(\"DELINKCIOUS_MUTUAL_AUTH\")！= \"false\" {\n\ntoken：= r.Header[\"Delinkcious-Caller-Token\"]\n\n如果 len(token) == 0 || token[0] == \"\" {\n\nreturn nil, errors.New(\"Missing caller token\")\n\n}\n\n如果！auth_util.HasCaller(\"link-manager\", token[0]) {\n\nreturn nil, errors.New(\"Unauthorized caller\")\n\n}\n\n}\n\n...\n\n}\n\n```", "```\n\napiVersion：\"rbac.istio.io/v1alpha1\"\n\n种类：ServiceRole\n\n元数据：\n\n名称：get-following\n\n命名空间：默认\n\n规格：\n\n规则：\n\n- 服务：[\"social-graph.default.svc.cluster.local\"]\n\n路径：[\"/following\"]\n\n方法：[\"GET\"]\n\n```", "```\n\napiVersion：\"rbac.istio.io/v1alpha1\"\n\n种类：ServiceRoleBinding\n\n元数据：\n\n名称：get-following\n\n命名空间：默认\n\n规格：\n\n主题：\n\n- 用户：\"cluster.local/ns/default/sa/link-manager\"\n\nroleRef：\n\n种类：ServiceRole\n\n名称：\"get-following\"\n\n```", "```\n\n$ kubectl scale --replicas=9 deployment/green-link-manager\n\ndeployment.extensions/green-link-manager scaled\n\n$ kubectl get po -l svc=link,app=manager\n\n名称                                 READY  STATUS    RESTARTS   AGE\n\ngreen-link-manager-5874c6cd4f-2ldfn   1/1   Running   10         15h\n\ngreen-link-manager-5874c6cd4f-9csxz   1/1   Running   0          52s\n\ngreen-link-manager-5874c6cd4f-c5rqn   1/1   Running   0          52s\n\ngreen-link-manager-5874c6cd4f-mvm5v   1/1   Running   10         15h\n\ngreen-link-manager-5874c6cd4f-qn4zj   1/1   Running   0          52s\n\ngreen-link-manager-5874c6cd4f-r2jxf   1/1   Running   0          52s\n\n绿色链接管理器-5874c6cd4f-rtwsj 1/1 运行中 0 52 秒\n\n绿色链接管理器-5874c6cd4f-sw27r 1/1 运行中 0 52 秒\n\n绿色链接管理器-5874c6cd4f-vcj9s 1/1 运行中 10 15 小时\n\nyellow-link-manager-67847d6b85-n97b5 1/1 运行中 4 6 分钟 20 秒\n\n```", "```\n\napiVersion: networking.istio.io/v1alpha3\n\n类型：VirtualService\n\n元数据：\n\n名称：social-graph-manager\n\n规格：\n\n主机：\n\n- social-graph-manager\n\nhttp：\n\n- 路由：\n\n- 目的地：\n\n主机：social-graph-manager\n\n子集：v0.5\n\n权重：90\n\n- 目的地：\n\n主机：social-graph-manager\n\n子集：金丝雀\n\n权重：10\n\n```", "```\n\napiVersion: nats.io/v1alpha2\n\n类型：NatsCluster\n\n元数据：\n\n名称：nats-cluster\n\n规格：\n\npod：\n\n# 在 nats pods 上禁用 istio\n\n注释：\n\nsidecar.istio.io/inject: \"false\"\n\n大小：1\n\n版本：\"1.4.0\"\n\n```", "```\n\n$ kubectl get crd -l k8s-app=istio -o custom-columns=\"NAME:.metadata.name\"\n\n名称\n\nadapters.config.istio.io\n\napikeys.config.istio.io\n\nattributemanifests.config.istio.io\n\nauthorizations.config.istio.io\n\nbypasses.config.istio.io\n\nchecknothings.config.istio.io\n\ncirconuses.config.istio.io\n\ndeniers.config.istio.io\n\ndestinationrules.networking.istio.io\n\nedges.config.istio.io\n\nenvoyfilters.networking.istio.io\n\nfluentds.config.istio.io\n\ngateways.networking.istio.io\n\nhandlers.config.istio.io\n\nhttpapispecbindings.config.istio.io\n\nhttpapispecs.config.istio.io\n\ninstances.config.istio.io\n\nkubernetesenvs.config.istio.io\n\nkuberneteses.config.istio.io\n\nlistcheckers.config.istio.io\n\nlistentries.config.istio.io\n\nlogentries.config.istio.io\n\nmemquotas.config.istio.io\n\nmetrics.config.istio.io\n\nnoops.config.istio.io\n\nopas.config.istio.io\n\nprometheuses.config.istio.io\n\nquotas.config.istio.io\n\nquotaspecbindings.config.istio.io\n\nquotaspecs.config.istio.io\n\nrbacconfigs.rbac.istio.io\n\nrbacs.config.istio.io\n\nredisquotas.config.istio.io\n\nreportnothings.config.istio.io\n\nrules.config.istio.io\n\nservicecontrolreports.config.istio.io\n\nservicecontrols.config.istio.io\n\nserviceentries.networking.istio.io\n\nservicerolebindings.rbac.istio.io\n\nserviceroles.rbac.istio.io\n\nsignalfxs.config.istio.io\n\nsolarwindses.config.istio.io\n\nstackdrivers.config.istio.io\n\nstatsds.config.istio.io\n\nstdios.config.istio.io\n\ntemplates.config.istio.io\n\ntracespans.config.istio.io\n\nvirtualservices.networking.istio.io\n\n```", "```\n\n$ kubectl -n istio-system get all -o name\n\npod/istio-citadel-6995f7bd9-7c7x9\n\npod/istio-egressgateway-57b96d87bd-cnc2s\n\npod/istio-galley-6d7dd498f6-b29sk\n\npod/istio-ingressgateway-ddd557db7-glwm2\n\npod/istio-pilot-5765d76b8c-d9hq7\n\npod/istio-policy-5b47b88467-x7pqf\n\npod/istio-sidecar-injector-6b9fbbfcf6-fhc4k\n\npod/istio-telemetry-65dcd9ff85-bkjtd\n\npod/promsd-7b49dcb96c-wrfs8\n\nservice/istio-citadel\n\nservice/istio-egressgateway\n\nservice/istio-galley\n\nservice/istio-ingressgateway\n\nservice/istio-pilot\n\nservice/istio-policy\n\nservice/istio-sidecar-injector\n\nservice/istio-telemetry\n\nservice/promsd\n\ndeployment.apps/istio-citadel\n\ndeployment.apps/istio-egressgateway\n\ndeployment.apps/istio-galley\n\ndeployment.apps/istio-ingressgateway\n\ndeployment.apps/istio-pilot\n\ndeployment.apps/istio-policy\n\ndeployment.apps/istio-sidecar-injector\n\ndeployment.apps/istio-telemetry\n\ndeployment.apps/promsd\n\nreplicaset.apps/istio-citadel-6995f7bd9\n\nreplicaset.apps/istio-egressgateway-57b96d87bd\n\nreplicaset.apps/istio-galley-6d7dd498f6\n\nreplicaset.apps/istio-ingressgateway-ddd557db7\n\nreplicaset.apps/istio-pilot-5765d76b8c\n\nreplicaset.apps/istio-policy-5b47b88467\n\nreplicaset.apps/istio-sidecar-injector-6b9fbbfcf6\n\nreplicaset.apps/istio-telemetry-65dcd9ff85\n\nreplicaset.apps/promsd-7b49dcb96c\n\nhorizontalpodautoscaler.autoscaling/istio-egressgateway\n\nhorizontalpodautoscaler.autoscaling/istio-ingressgateway\n\nhorizontalpodautoscaler.autoscaling/istio-pilot\n\nhorizontalpodautoscaler.autoscaling/istio-policy\n\nhorizontalpodautoscaler.autoscaling/istio-telemetry\n\n```", "```\n\n$ kubectl get po\n\nNAME READY STATUS RESTARTS AGE\n\napi-gateway-5497d95c74-zlgnm 2/2 Running 0 4d11h\n\nlink-db-7445d6cbf7-wdfsb 2/2 Running 0 4d22h\n\nlink-manager-54968ff8cf-vtpqr 2/2 Running 1 4d13h\n\nnats-cluster-1 1/1 Running 0 4d20h\n\nnats-operator-55dfdc6868-2b57q 2/2 Running 3 4d22h\n\nnews-manager-7f447f5c9f-n2v2v 2/2 Running 1 4d20h\n\nnews-manager-redis-0 2/2 Running 0 4d22h\n\nsocial-graph-db-7d8ffb877b-nrzxh 2/2 Running 0 4d11h\n\nsocial-graph-manager-59b464456f-48lrn 2/2 Running 1 4d11h\n\ntrouble-64554479d-rjszv 2/2 Running 0 4d17h\n\nuser-db-0 2/2 Running 0 4d22h\n\nuser-manager-699458447-9h64n 2/2 Running 2 4d22h\n\n```"]